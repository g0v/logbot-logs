[{"time":"1434507925.088","nick":"tkirby","msg":"有人有在 chrome extension 裡做 authentication 的經驗嗎？"},{"time":"1434510636.147","nick":"ⓢ motionman","msg":"oauth?"},{"time":"1434510652.735","nick":"tkirby","msg":"yeah... use oauth or sth like that"},{"time":"1434510695.217","nick":"ⓢ motionman","msg":"shameless plug from google, &lt;<a href=\"https://developer.chrome.com/extensions/tut_oauth\">https://developer.chrome.com/extensions/tut_oauth</a>&gt;"},{"time":"1434510697.116","nick":"kcwu","msg":"slackbot2's url: [Tutorial: OAuth - Google Chrome]"},{"time":"1434510740.275","nick":"ⓢ motionman","msg":"要注意endpoint和scope最近更新了"},{"time":"1434510757.274","nick":"tkirby","msg":"how do you prevent from giving client secret in extension?"},{"time":"1434510851.402","nick":"ⓢ motionman","msg":"afaik you have to do it on server side"},{"time":"1434510908.413","nick":"tkirby","msg":"這樣的話似乎無法認明 extension 正身?"},{"time":"1434510985.570","nick":"ⓢ motionman","msg":"嗯,老實說很矛盾的問題"},{"time":"1434511000.588","nick":"ⓢ motionman","msg":"有心人都能作假"},{"time":"1434511008.132","nick":"tkirby","msg":"(y)"},{"time":"1434511490.188","nick":"ⓢ motionman","msg":"@tkirby: 如果google oauth可以把責任卸給chrome &lt;<a href=\"https://developer.chrome.com/extensions/identity\">https://developer.chrome.com/extensions/identity</a>&gt;"},{"time":"1434511491.851","nick":"kcwu","msg":"slackbot2's url: [chrome.identity - Google Chrome]"},{"time":"1434511529.246","nick":"tkirby","msg":"可是我現在是要自己做 oauth server... XD"},{"time":"1434511601.712","nick":"tkirby","msg":"話說回來，這個是拿 chrome user 的那個 identity 嗎"},{"time":"1434511627.360","nick":"ⓢ hychen","msg":"tkirby: client 要用什麼當identity?"},{"time":"1434511641.377","nick":"ⓢ hychen","msg":"ga 裡面好像有一個User ID 可用"},{"time":"1434511652.392","nick":"ⓢ motionman","msg":"@tkirby: 嗯"},{"time":"1434511671.411","nick":"ⓢ motionman","msg":"@tkirby: 裝extension的那個user"},{"time":"1434511722.089","nick":"tkirby","msg":"hmmm"},{"time":"1434511747.505","nick":"ⓢ hychen","msg":"我也想在我的extension 放identitiy"},{"time":"1434511784.504","nick":"tkirby","msg":"hychen 的應該用 chrome identity 就好了"},{"time":"1434511824.502","nick":"tkirby","msg":"我現在要做的事情 exnteion 只是其中一部份，所以得自己弄 oauth server..."},{"time":"1434511837.335","nick":"tkirby","msg":"或者是將 chrome user 與 oauth 連結?"},{"time":"1434511854.933","nick":"tkirby","msg":"這樣的話 firefox 要做 extension 的話...."},{"time":"1434512539.470","nick":"ⓢ hychen","msg":"tkirby: 你是要做匿名identity?"},{"time":"1434512617.062","nick":"tkirby","msg":"hychen: 不太懂，你的意思是?"},{"time":"1434512705.670","nick":"ⓢ hychen","msg":"tkirby: 就是by app的identity, 使用者不需要註冊, 但是你可以區分data是屬於哪個user"},{"time":"1434512732.702","nick":"ⓢ hychen","msg":"喔, 你要弄oauth , 那是需要user 註冊的那種"},{"time":"1434512788.993","nick":"tkirby","msg":"yeah"},{"time":"1434512919.933","nick":"ⓢ motionman","msg":"但也不想把client secret放在extension裡頭"},{"time":"1434513427.231","nick":"tkirby","msg":"indeed"},{"time":"1434513583.222","nick":"tkirby","msg":"連結 google identity 也許可行... 要再調查一下，而且應該有些限制"},{"time":"1434513828.047","nick":"ⓢ motionman","msg":"看你能放開多少吧,如果完全是server side方面可以供給jwt"},{"time":"1434526586.834","nick":"ⓢ mrorz","msg":"tkirby: 我之前有在 google api"},{"time":"1434526605.856","nick":"ⓢ mrorz","msg":"在 Chrome extension 內用 google api 做「上傳到 google drive」"},{"time":"1434526658.917","nick":"ⓢ mrorz","msg":"還是 tkirby 其實不用操作 google api 呢"},{"time":"1434526731.542","nick":"tkirby","msg":"mrorz: 你有在 extension 裡面放 client secret 嗎？"},{"time":"1434526783.075","nick":"ⓢ mrorz","msg":"我找一下"},{"time":"1434526940.266","nick":"ⓢ mrorz","msg":"沒有，我沒放 client secret"},{"time":"1434526976.310","nick":"ⓢ mrorz","msg":"&lt;<a href=\"https://github.com/MrOrz/SeeSS-Reload/blob/master/src/global-chrome.coffee\">https://github.com/MrOrz/SeeSS-Reload/blob/master/src/global-chrome.coffee</a>&gt;"},{"time":"1434526977.313","nick":"ⓢ ↵","msg":"`gapi` 是透過 manifest 餵進去的 google api client js lib"},{"time":"1434526978.217","nick":"kcwu","msg":"slackbot2's url: [SeeSS-Reload/global-chrome.coffee at master · MrOrz/SeeSS-Reload · GitHub]"},{"time":"1434527150.527","nick":"ⓢ mrorz","msg":"code 大致跟這個一樣 &lt;<a href=\"https://developers.google.com/api-client-library/javascript/start/start-js\">https://developers.google.com/api-client-library/javascript/start/start-js</a>&gt;"},{"time":"1434527151.587","nick":"kcwu","msg":"slackbot2's url: [Getting Started   |   API Client Library for JavaScript (Beta)   |   Google Developers]"},{"time":"1434527662.635","nick":"tkirby","msg":"hmm 你知道背後的機制是什麼嗎，是透過 chrome identity ?"},{"time":"1434527891.437","nick":"ⓢ mrorz","msg":"不知道椰，Facebook javascript client library 也是不用 secret 的"},{"time":"1434528021.601","nick":"ⓢ mrorz","msg":"我突然發現我的 code 跟  &lt;<a href=\"https://developers.google.com/api-client-library/javascript/start/start-js\">https://developers.google.com/api-client-library/javascript/start/start-js</a>&gt; 一點都不像⋯⋯ XD&quot;"},{"time":"1434528038.855","nick":"tkirby","msg":"start-js 那個例子好像有提供 secret (apikey) ?"},{"time":"1434528143.747","nick":"ⓢ mrorz","msg":"我的 code 應該跟這個比較像"},{"time":"1434528144.748","nick":"ⓢ ↵","msg":"&lt;<a href=\"https://developers.google.com/drive/web/quickstart/quickstart-js\">https://developers.google.com/drive/web/quickstart/quickstart-js</a>&gt;"},{"time":"1434528145.856","nick":"kcwu","msg":"slackbot2's url: [Quickstart: Run a Drive app in JavaScript   |   Drive REST API   |   Google Developers]"},{"time":"1434528158.765","nick":"ⓢ mrorz","msg":"一個 gapi.auth.authorize 之後就很神奇地什麼都搞定了"},{"time":"1434528283.984","nick":"tkirby","msg":"我想想看"},{"time":"1434528301.385","nick":"tkirby","msg":"看起來這樣是任何人都可以使用"},{"time":"1434528366.017","nick":"ⓢ mrorz","msg":"是說 apikey 不等於 secret 的喲"},{"time":"1434528374.161","nick":"tkirby","msg":"就有點像是大家都用同一個 secret 的感覺?"},{"time":"1434528412.624","nick":"tkirby","msg":"apikey 是個適合給大家看的東西嗎？"},{"time":"1434528559.255","nick":"ⓢ motionman","msg":"TIL"},{"time":"1434528578.280","nick":"ⓢ mrorz","msg":"以前會要 `apikey` 的服務，都是一些無關個資的服務"},{"time":"1434528579.281","nick":"ⓢ ↵","msg":"像舊的 imgur data"},{"time":"1434528604.311","nick":"ⓢ mrorz","msg":"現在 google 好像也是OAuth, Public API access兩種併行"},{"time":"1434528618.330","nick":"ⓢ mrorz","msg":"&lt;<a href=\"https://developers.google.com/api-client-library/javascript/features/authentication\">https://developers.google.com/api-client-library/javascript/features/authentication</a>&gt; 分成「Simple」與[]"},{"time":"1434528619.707","nick":"kcwu","msg":"slackbot2's url: [Authentication using the Google APIs Client Library for JavaScript   |   API Client Library for JavaScript (Beta)   |   Google Developers]"},{"time":"1434528622.333","nick":"ⓢ mrorz","msg":"「Authorized」"},{"time":"1434528632.345","nick":"ⓢ mrorz","msg":"前者不能拿 private user data，但後者可以"},{"time":"1434528695.420","nick":"ⓢ mrorz","msg":"我那個 project（&lt;<a href=\"https://github.com/MrOrz/SeeSS-Reload/blob/master/src/global-chrome.coffee\">https://github.com/MrOrz/SeeSS-Reload/blob/master/src/global-chrome.coffee</a>&gt; ）因為會上傳東西到使用者的 google drive，會存取到 private user data，因此屬於「Authorized」的 API access"},{"time":"1434528697.136","nick":"kcwu","msg":"slackbot2's url: [SeeSS-Reload/global-chrome.coffee at master · MrOrz/SeeSS-Reload · GitHub]"},{"time":"1434528699.818","nick":"tkirby","msg":"我可能有點混用詞彙了，不過我不僅是想拿 private data, 我還希望只有自己的 extension 可以拿, 所以不光是要做 auth, 還要確認來源"},{"time":"1434528717.443","nick":"ⓢ mrorz","msg":"不過神奇的是，我不知道為什麼我沒給 API key 也不會出事情"},{"time":"1434528763.498","nick":"ⓢ mrorz","msg":"可是 google api 應該都是拿使用者自己的 drive data gji"},{"time":"1434528765.500","nick":"ⓢ mrorz","msg":"說"},{"time":"1434528776.513","nick":"ⓢ motionman","msg":"@mrorz: google少用api key了,rate limit都是跟ip或服務綁定"},{"time":"1434528777.514","nick":"ⓢ mrorz","msg":"更正，使用者自己的 google data"},{"time":"1434528837.582","nick":"ⓢ mrorz","msg":"@motionman: 難怪 api console 在我們申請新 client ID 時，都一定要我們設定 redirect URI 與 origins"},{"time":"1434528840.585","nick":"ⓢ motionman","msg":"話說也對有oauth client secret或id沒有正確的domain也是沒有用哈哈哈"},{"time":"1434528861.611","nick":"ⓢ motionman","msg":"@tkirby: 不好意思,剛腦殘了一下"},{"time":"1434528875.721","nick":"tkirby","msg":"嘎？"},{"time":"1434528891.649","nick":"ⓢ motionman","msg":"其實secret給人拿了也沒用"},{"time":"1434528900.660","nick":"ⓢ mrorz","msg":"@tkirby 我發現我傳圖在 IRC 好像看不到"},{"time":"1434528906.977","nick":"tkirby","msg":"yeah 我在 irc XD"},{"time":"1434528911.671","nick":"ⓢ mrorz","msg":"我有傳我 API console 的設定"},{"time":"1434528937.704","nick":"ⓢ mrorz","msg":"裡面其實會要設定 redirect url 之類的東西"},{"time":"1434528954.723","nick":"ⓢ motionman","msg":"剛記得google enterprise api的api key也是這麼放在html裡"},{"time":"1434528994.773","nick":"ⓢ motionman","msg":"現在api都要在console裡做domain或app id的綁定,給人拿了也沒有用"},{"time":"1434529028.940","nick":"tkirby","msg":"api key 是確認api user 的身份，如果放出來就是讓大家都可以用這個身份存取?"},{"time":"1434529042.831","nick":"ⓢ mrorz","msg":"API key 要設定 Referrers"},{"time":"1434529051.840","nick":"ⓢ mrorz","msg":"你可以選 any referrer allowed"},{"time":"1434529063.853","nick":"ⓢ mrorz","msg":"這樣就算是大家都能用這個身份存取了"},{"time":"1434529074.992","nick":"tkirby","msg":" 比方說用 api key 做 HTTP Get, 用 curl 就可以避掉 domain 綁定的問題了"},{"time":"1434529137.937","nick":"ⓢ mrorz","msg":"// 是說只用 apikey ，不走 oauth 的話，能拿到什麼資料呀 @@"},{"time":"1434529176.736","nick":"tkirby","msg":"不是啦， api key 是限制 api user 的意味, oauth 是 end user grant permission 的意味"},{"time":"1434529208.025","nick":"ⓢ mrorz","msg":"喔喔喔喔"},{"time":"1434529210.116","nick":"tkirby","msg":"比方說 api 限制用量一天5000 次，那我們就要先拿個 api key, 然後用 api key 存取"},{"time":"1434529218.037","nick":"ⓢ mrorz","msg":"如果是說會擔心 api key quota 的問題"},{"time":"1434529246.069","nick":"ⓢ mrorz","msg":"那確實是 api key 一旦流出去，大家就都能用你的 quota XD"},{"time":"1434529273.097","nick":"ⓢ motionman","msg":"extension不清楚但至少我記得enterprise的api key的quota是跟domain的"},{"time":"1434529297.127","nick":"ⓢ motionman","msg":"就好像analytics的一個短id"},{"time":"1434529344.208","nick":"tkirby","msg":"如果沒搞錯的話 extension 執行的 context 是 chrome://extensions/ (popup)  跟 tab 的 url (content), 好像沒有特定網址"},{"time":"1434529387.236","nick":"ⓢ motionman","msg":"嗯,但我覺得用chrome的identity應該就夠了"},{"time":"1434529508.380","nick":"ⓢ motionman","msg":"extension有app id綁定"},{"time":"1434529569.456","nick":"ⓢ motionman","msg":"不好意思,早上腦殘"},{"time":"1434529576.466","nick":"ⓢ motionman","msg":"@tkirby: &lt;<a href=\"https://i.imgur.com/v60sznH.png\">https://i.imgur.com/v60sznH.png</a>&gt;"},{"time":"1434529789.211","nick":"tkirby","msg":"你是說拿 app id 來當 oauth 的 client secret 嗎"},{"time":"1434529865.060","nick":"tkirby","msg":"我現在是自己要架 oauth server, 並不是要使用 google api"},{"time":"1434529945.919","nick":"ⓢ mrorz","msg":"! 為什麼我會把問題看成「在 extension 裡面做 google 的 authentication」"},{"time":"1434529949.924","nick":"ⓢ mrorz","msg":"（跪"},{"time":"1434529983.280","nick":"tkirby","msg":"XD"},{"time":"1434530011.105","nick":"tkirby","msg":"拿 app id 好像也不行.. 那人家知道 app id 以後也可以寫一個一樣的 extension 了"},{"time":"1434530028.801","nick":"tkirby","msg":"看來還是要用 chrome identity 想辦法連結 oauth server account"},{"time":"1434530483.590","nick":"ⓢ motionman","msg":"哈哈哈腦殘x2,我也以爲這個了..."},{"time":"1434530484.593","nick":"ⓢ ↵","msg":"&lt;<a href=\"https://g0v-tw.slack.com/archives/general/p1434529944002834\">https://g0v-tw.slack.com/archives/general/p1434529944002834</a>&gt;"},{"time":"1434530487.477","nick":"kcwu","msg":"slackbot2's url: [Slack]"},{"time":"1434530558.337","nick":"tkirby","msg":"XDD"},{"time":"1434530687.840","nick":"ⓢ motionman","msg":"如果說是去第三方的網站(你的oauth server)先登入然後利用browser的這個session拿access token/jwt來跟你的服務溝通如何?"},{"time":"1434530791.965","nick":"ⓢ motionman","msg":"just paper crafting, not sure how viable that is"},{"time":"1434530809.778","nick":"tkirby","msg":"感覺還是沒辦法避免別人做一樣的事"},{"time":"1434530814.995","nick":"ⓢ mrorz","msg":"現在 tkirby 的問題好像是，其他人也可以蓋一個 client 來做一模一樣的事情"},{"time":"1434530821.189","nick":"tkirby","msg":"yeah"},{"time":"1434530826.005","nick":"ⓢ mrorz","msg":"不過在瀏覽器發生的東西"},{"time":"1434530829.009","nick":"ⓢ motionman","msg":"嗯,怎麼都能spoof"},{"time":"1434530846.028","nick":"ⓢ motionman","msg":"到最後看你的取捨"},{"time":"1434530858.042","nick":"ⓢ motionman","msg":"#廢話"},{"time":"1434530862.656","nick":"tkirby","msg":"XD"},{"time":"1434530868.055","nick":"ⓢ mrorz","msg":"例如說用 activeX 或 java applet (喂)"},{"time":"1434530884.705","nick":"tkirby","msg":"記得 ptt 曾經有個 ActiveX 版"},{"time":"1434530886.074","nick":"ⓢ motionman","msg":"chrome斷了npapi"},{"time":"1434530893.941","nick":"tkirby","msg":"我好像當過版主... XDDDDDD"},{"time":"1434531009.218","nick":"ⓢ motionman","msg":"NaCl吧"},{"time":"1434531102.330","nick":"ⓢ motionman","msg":"^很蠢的答案"},{"time":"1434535494.777","nick":"ⓢ yhsiang","msg":"tkirby: 主要是 redirect uri"},{"time":"1434553929.608","nick":"ⓢ etblue","msg":"yhsiang: soidid: 我今天把議程表接上了官方 api （大誤） &lt;<a href=\"http://etblue.github.io/wild.coscup.org/public/program\">http://etblue.github.io/wild.coscup.org/public/program</a>&gt;"},{"time":"1434553930.667","nick":"kcwu","msg":"slackbot2's url: [議程 | 開源人年會 COSCUP.org 野生官網]"},{"time":"1434554452.342","nick":"V1ctor","msg":"tkirby: Google (as a identity provider) 限制其他 extension 使用的做法是，原作者必須先到 Developers Console 註冊 extension id 跟 client id.  但這是有 Chrome 幫忙驗證，我不確定你的 identity provider 要怎麼做"},{"time":"1434554610.157","nick":"V1ctor","msg":"tkirby: 啊 一樣 你的 redirect URL 要指定 extension id"},{"time":"1434554618.792","nick":"V1ctor","msg":"<a href=\"https://developer.chrome.com/apps/identity#method-launchWebAuthFlow\">https://developer.chrome.com/apps/identity#method-launchWebAuthFlow</a>"},{"time":"1434554621.366","nick":"kcwu","msg":"V1ctor's url: [chrome.identity - Google Chrome]"},{"time":"1434554883.771","nick":"ⓢ clkao","msg":"V1ctor!!"},{"time":"1434554905.799","nick":"ⓢ clkao","msg":"V1ctor: 有看到 rschiang 的 LF2.0 project 嗎？"},{"time":"1434554931.726","nick":"V1ctor","msg":"沒有 那是什麼 XD"},{"time":"1434554956.256","nick":"V1ctor","msg":"clkao: 你在加州了嗎"},{"time":"1434555023.943","nick":"ⓢ rschiang","msg":"Law Formation 2.0, 在討論要用什麼方式存法規比較不用每個專案都重複造輪子(○'ω'○)"},{"time":"1434555106.045","nick":"ⓢ clkao","msg":"v1ctor, ya, 這幾天都在 palo alto"},{"time":"1434555175.608","nick":"V1ctor","msg":"rschiang: 聽起來要研究很多國家的 use case? :p"},{"time":"1434555310.916","nick":"tkirby","msg":"V1ctor: 喔喔, 是說 chrome 會代理 extension 認證的部份嗎"},{"time":"1434555325.657","nick":"tkirby","msg":"(y)"},{"time":"1434555469.773","nick":"V1ctor","msg":"tkirby: 對，但當然要 server 的配合"},{"time":"1434555539.676","nick":"V1ctor","msg":"rschiang: 我覺得這很值得做，有 github 還是什麼文件嗎"}]